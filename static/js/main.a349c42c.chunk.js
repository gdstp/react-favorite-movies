(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(25),c=n.n(a),o=n(31),s=n(8),u=n(22),l=n(23),d=n.n(l),j=n(29),b=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r,i,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.Title,r=t.Poster,i=t.Plot,a=t.imdbID,e.abrupt("return",new Promise((function(e){var t=localStorage.getItem("movies"),c={Title:n,Poster:r,Plot:i,imdbID:a},o=[];null!==t&&JSON.parse(t).map((function(e){return o.push(e)})),!o.some((function(e){return e.imdbID===a}))&&o.length<10&&o.push(c),localStorage.setItem("movies",JSON.stringify(o)),e(o)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=p().filter((function(e){return e.imdbID!==t}));localStorage.setItem("movies",JSON.stringify(n)),e(n)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=localStorage.getItem("movies");return null===e?[]:JSON.parse(e)},m=[{Title:"",Poster:"",Plot:"",imdbID:""}],f=function(e,t){switch(t.type){case"REQUEST":return{isLoading:!0,data:m,error:""};case"SUCCESS":return{isLoading:!1,data:t.payload,error:""};case"FAILURE":return{isLoading:!1,data:m,error:t.error};default:return e}},O=n(2),x=i.a.createContext({}),g=function(e){var t=e.children,n=Object(r.useState)(""),i=Object(u.a)(n,2),a=i[0],c=i[1],o=Object(r.useState)(p()),s=Object(u.a)(o,2),l=s[0],d=s[1],j=Object(r.useReducer)(f,{data:p(),isLoading:!1,error:""}),m=Object(u.a)(j,2),g=(m[0],m[1]);return Object(O.jsx)(x.Provider,{value:{movieName:a,updateMovieName:function(e){c(e)},likedMovies:l,LikeMovie:function(e){var t=e.Title,n=e.Poster,r=e.Plot,i=e.imdbID;g({type:"REQUEST"}),b({Title:t,Poster:n,Plot:r,imdbID:i}).then((function(e){d(e),g({type:"SUCCESS",payload:e})})).catch((function(e){return g({type:"FAILURE",error:e})}))},DislikeMovie:function(e){h(e).then((function(e){d(e),g({type:"SUCCESS",payload:e})})).catch((function(e){return g({type:"FAILURE",error:e})}))}},children:t})},v=n(139),S=n(129),y=n(130),I=n(131),w=n(132),P=n(136),k=n(134),C=n(133),L=n(135),E=n(127),N=function(e){var t=e.onClick,n=e.liked;return Object(O.jsx)(E.a,{size:"small",color:"primary",onClick:t,children:n?"Like":"Dislike"})},R=Object(S.a)({grid:{maxWidth:245},root:{maxWidth:245,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},card:{margin:"auto",backgroundPosition:"top center",backgroundSize:"contain"},footer:{alignItems:"flex-end"}}),T=function(e){var t=e.Title,n=e.Poster,i=e.Plot,a=e.imdbID,c=R(),o=Object(r.useContext)(x),s=o.LikeMovie,u=o.likedMovies,l=o.DislikeMovie;return Object(O.jsx)(y.a,{item:!0,xs:6,sm:4,lg:3,className:c.grid,children:Object(O.jsxs)(I.a,{className:c.root,children:[Object(O.jsxs)(w.a,{children:[Object(O.jsx)(C.a,{component:"img",alt:t,height:"240",image:n,title:t,className:c.card}),Object(O.jsxs)(k.a,{children:[Object(O.jsx)(L.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t}),Object(O.jsx)(L.a,{variant:"body2",color:"textSecondary",component:"p",children:i})]})]}),Object(O.jsx)(P.a,{className:c.footer,children:Object(O.jsx)(N,{onClick:function(){u.some((function(e){return e.imdbID===a}))?l(a):s({Title:t,Poster:n,Plot:i,imdbID:a})},liked:!u.some((function(e){return e.imdbID===a}))})})]})})},D=Object(S.a)({root:{marginTop:"88px"}}),U=function(e){var t=e.children,n=D();return Object(O.jsx)(y.a,{container:!0,spacing:1,className:n.root,children:Object(O.jsx)(y.a,{container:!0,item:!0,xs:12,spacing:3,children:t})})},F=n(141),M=n(143),J=n(137),A=n(138),B=n(43),Q=n(12),z=n(142),G=n(61),W=n.n(G),Y=Object(S.a)((function(e){return Object(M.a)({search:Object(B.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Q.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Q.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(B.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})})})),q=function(){var e=Y(),t=Object(r.useContext)(x).updateMovieName;return Object(O.jsxs)("div",{className:e.search,children:[Object(O.jsx)("div",{className:e.searchIcon,children:Object(O.jsx)(W.a,{})}),Object(O.jsx)(z.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){t(e.target.value)}})]})},H=Object(S.a)((function(e){return Object(M.a)({root:{width:"100%",top:0,flexGrow:1,position:"fixed",zIndex:4},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},link:{color:"white",textDecoration:"none"}})})),K=function(){var e=H();return Object(O.jsx)("div",{className:e.root,children:Object(O.jsx)(J.a,{position:"static",children:Object(O.jsxs)(A.a,{children:[Object(O.jsx)(L.a,{variant:"h6",className:e.title,children:Object(O.jsx)(o.b,{to:"/",className:e.link,children:"Movies"})}),Object(O.jsx)(q,{}),Object(O.jsx)(o.b,{to:"/favorites",className:e.link,children:Object(O.jsx)(E.a,{color:"inherit",children:"Favorites"})})]})})})},V=function(){var e=Object(r.useContext)(x).likedMovies;return Object(O.jsxs)("div",{children:[Object(O.jsx)(K,{}),Object(O.jsx)(v.a,{style:{marginTop:"84px"},children:Object(O.jsxs)(U,{children:[0===e.length&&Object(O.jsx)(F.a,{severity:"info",style:{width:"100%"},children:"You haven't liked any movie yet."}),e&&e.map((function(e){return Object(O.jsx)(T,{Title:e.Title,Poster:e.Poster,imdbID:e.imdbID,Plot:e.Plot},e.imdbID)}))]})})]})},X={Response:!1,Search:[],totalResults:0},Z={data:X,isLoading:!1,error:""},$=function(e,t){switch(t.type){case"REQUEST":return{isLoading:!0,data:X,error:""};case"SUCCESS":return{isLoading:!1,data:t.payload,error:""};case"FAILURE":return{isLoading:!1,data:X,error:t.error};default:return e}},_=(n(86),function(e){var t=e.msg;return Object(O.jsxs)("div",{className:"container",children:["Falhou: ",t]})}),ee=function(){return Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("div",{className:"lds-ring",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]})})},te=function(e){var t=e.isLoading,n=e.error;return Object(O.jsxs)("div",{children:[t&&Object(O.jsx)(ee,{}),n&&Object(O.jsx)(_,{msg:n})]})},ne=n(140),re=Object(S.a)({root:{width:"100%",display:"flex",marginTop:25,marginBottom:25,justifyContent:"center"}}),ie=function(e){var t=e.total,n=e.onChange,r=e.currentRenderedPage,i=re();return Object(O.jsx)(O.Fragment,{children:t&&Object(O.jsx)("div",{className:i.root,children:Object(O.jsx)(ne.a,{count:Math.ceil(t/10),variant:"outlined",shape:"rounded",page:r,onChange:function(e,t){n(t)}})})})},ae=function(e,t){var n=Object(r.useState)(e),i=Object(u.a)(n,2),a=i[0],c=i[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){c(e)}),t);return function(){clearTimeout(n)}}),[e,t]),a},ce=n(62),oe=n.n(ce).a.create({baseURL:"http://www.omdbapi.com"}),se=function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oe.get("/?s=".concat(t,"&page=").concat(n,"&apikey=").concat("4edb14d")));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(r.useContext)(x).movieName,t=Object(r.useReducer)($,Z),n=Object(u.a)(t,2),i=n[0],a=i.isLoading,c=i.error,o=i.data,s=n[1],l=ae(e,1e3),d=Object(r.useState)(1),j=Object(u.a)(d,2),b=j[0],h=j[1];return Object(r.useEffect)((function(){s({type:"REQUEST"}),se(l,b).then((function(e){return s({type:"SUCCESS",payload:e.data})})).catch((function(e){return s({type:"FAILURE",error:e.message})}))}),[l,b]),Object(r.useEffect)((function(){h(1)}),[e]),Object(O.jsxs)("div",{children:[Object(O.jsx)(K,{}),Object(O.jsxs)(v.a,{style:{marginTop:"24px"},children:[Object(O.jsx)(te,{isLoading:a,error:c}),Object(O.jsx)(U,{children:o.Search&&o.Search.map((function(e,t){return Object(O.jsx)(T,{Title:e.Title,Poster:e.Poster,Plot:e.Plot,imdbID:e.imdbID},t)}))}),Object(O.jsx)(ie,{total:o.totalResults,onChange:function(e){return h(e)},currentRenderedPage:b})]})]})};n(105);var le=function(){return Object(O.jsx)(g,{children:Object(O.jsx)(o.a,{basename:window.location.pathname||"",children:Object(O.jsxs)(s.c,{children:[Object(O.jsx)(s.a,{path:"/",exact:!0,component:ue}),Object(O.jsx)(s.a,{path:"/favorites",component:V})]})})})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,145)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))};c.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(le,{})}),document.getElementById("root")),de()},86:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.a349c42c.chunk.js.map